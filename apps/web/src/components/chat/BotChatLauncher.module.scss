@scope (.launcherRoot) {
  :scope {
    --assistant-inline-offset: clamp(0.9rem, 2vw, 1.35rem);
    --assistant-block-offset: clamp(0.9rem, 2.6vh, 1.4rem);
    --assistant-trigger-size: clamp(3.2rem, 4.2vw, 3.75rem);
    --assistant-idle-opacity: 0.56;
    position: fixed;
    right: var(--assistant-inline-offset);
    bottom: var(--assistant-block-offset);
    z-index: 72;
    pointer-events: auto;
    isolation: isolate;
  }

  :scope[data-open="true"] .launchButton,
  :scope:focus-within .launchButton,
  :scope:hover .launchButton {
    opacity: 1;
    animation: none;
    transform: translateY(0) scale(1);
  }

  :scope[data-open="true"] .launchAura,
  :scope:focus-within .launchAura,
  :scope:hover .launchAura {
    opacity: 1;
    transform: scale(1.06);
  }
}

.rootOpen,
.rootClosed {
  display: block;
}

.launchAura {
  position: absolute;
  inset: -0.55rem;
  border-radius: 999px;
  background: radial-gradient(
    circle,
    color-mix(in oklab, var(--primary) 24%, transparent) 0%,
    transparent 70%
  );
  opacity: 0.62;
  transform: scale(0.9);
  filter: blur(2px);
  transition:
    opacity var(--transition-mid, 220ms) var(--easing-standard, ease),
    transform var(--transition-mid, 220ms) var(--easing-bounce, ease);
  animation: launcherAura 1800ms var(--easing-standard, ease) infinite alternate;
  pointer-events: none;
}

.launchButton {
  anchor-name: --assistant-chat-anchor;
  inline-size: var(--assistant-trigger-size);
  block-size: var(--assistant-trigger-size);
  display: inline-grid;
  place-items: center;
  border: 1px solid color-mix(in oklab, var(--primary) 45%, var(--border-1));
  border-radius: 999px;
  background:
    radial-gradient(
      circle at 24% 22%,
      color-mix(in oklab, white 52%, transparent),
      transparent 44%
    ),
    linear-gradient(
      145deg,
      var(--primary) 0%,
      color-mix(in oklab, var(--primary) 85%, var(--primary-active) 15%) 100%
    );
  box-shadow:
    0 18px 34px color-mix(in oklab, var(--primary) 35%, transparent),
    inset 0 1px 0 color-mix(in oklab, white 50%, transparent);
  color: var(--primary-fg, #fff);
  cursor: pointer;
  opacity: 1;
  transform: translateY(0) scale(1);
  transition:
    opacity var(--transition-mid, 220ms) var(--easing-standard, ease),
    transform var(--transition-fast, 140ms) var(--easing-bounce, ease),
    box-shadow var(--transition-fast, 140ms) var(--easing-standard, ease),
    filter var(--transition-fast, 140ms) var(--easing-standard, ease);
  animation:
    launcherIntro 420ms var(--easing-bounce, ease) both,
    launcherIdleDim 720ms var(--easing-standard, ease) 1900ms forwards;
  position: relative;
}

.buttonOpen,
.buttonClosed {
  outline: none;
}

.launchButton:hover,
.launchButton:focus-visible {
  opacity: 1;
  animation: none;
  transform: translateY(-2px) scale(1.04);
  box-shadow:
    0 24px 40px color-mix(in oklab, var(--primary) 42%, transparent),
    inset 0 1px 0 color-mix(in oklab, white 60%, transparent);
}

.launchButton:active {
  transform: translateY(0) scale(0.98);
  filter: saturate(0.92);
}

.launchButton:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--primary) 55%, white);
  outline-offset: 3px;
}

.icon {
  inline-size: 1.35rem;
  block-size: 1.35rem;
  display: block;
  filter: drop-shadow(0 1px 0 rgba(0, 0, 0, 0.2));
}

.statusDot {
  position: absolute;
  right: 0.4rem;
  bottom: 0.35rem;
  inline-size: 0.62rem;
  block-size: 0.62rem;
  border-radius: 999px;
  border: 2px solid color-mix(in oklab, var(--surface-1) 75%, transparent);
  background: var(--success);
  box-shadow: 0 0 0 0 color-mix(in oklab, var(--success) 44%, transparent);
  animation: statusPulse 1550ms ease infinite;
}

@supports (position-try: flip-inline) {
  .launcherRoot {
    position-try: flip-inline, flip-block;
  }
}

@supports (animation-timeline: auto) {
  @starting-style {
    .launchButton {
      opacity: 0;
      transform: translateY(15px) scale(0.82);
    }
  }
}

@keyframes launcherIntro {
  0% {
    opacity: 0;
    transform: translateY(15px) scale(0.82);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes launcherIdleDim {
  0% {
    opacity: 1;
  }
  100% {
    opacity: var(--assistant-idle-opacity);
  }
}

@keyframes launcherAura {
  0% {
    opacity: 0.45;
    transform: scale(0.88);
  }
  100% {
    opacity: 0.84;
    transform: scale(1.03);
  }
}

@keyframes statusPulse {
  0% {
    box-shadow: 0 0 0 0 color-mix(in oklab, var(--success) 44%, transparent);
  }
  70% {
    box-shadow: 0 0 0 0.48rem color-mix(in oklab, var(--success) 0%, transparent);
  }
  100% {
    box-shadow: 0 0 0 0 color-mix(in oklab, var(--success) 0%, transparent);
  }
}

@media (max-width: 700px) {
  .launcherRoot {
    --assistant-trigger-size: 3.35rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .launchAura,
  .launchButton,
  .statusDot {
    animation: none;
  }
}
