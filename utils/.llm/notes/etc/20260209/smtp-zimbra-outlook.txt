SMTP integration notes (Zimbra + Outlook) â€” dual flow

Overview:
- SMTP gateway supports profile selection for zimbra/outlook/default.
- Profiles load from environment variables.
- Dual flow sends the same email through ALL configured profiles.

Dual flow control:
- Set SMTP_FLOW_BOTH=1 to force sending through all profiles.
- Or set msg.meta.smtpProfile = "both" in the sender call.

Profiles:
1) zimbra
2) outlook
3) default

Environment variables:
- ZIMBRA_SMTP_HOST, ZIMBRA_SMTP_PORT, ZIMBRA_SMTP_SECURE, ZIMBRA_SMTP_USER, ZIMBRA_SMTP_PASS, ZIMBRA_SMTP_FROM
- OUTLOOK_SMTP_HOST, OUTLOOK_SMTP_PORT, OUTLOOK_SMTP_SECURE, OUTLOOK_SMTP_USER, OUTLOOK_SMTP_PASS, OUTLOOK_SMTP_FROM
- SMTP_HOST, SMTP_PORT, SMTP_SECURE, SMTP_USER, SMTP_PASS, SMTP_FROM
- DEFAULT_SMTP_PROFILE (zimbra | outlook | default)
- SMTP_ENABLED=1 to force SMTP gateway selection
- SMTP_FLOW_BOTH=1 to send through all configured profiles

Outlook defaults:
- host: smtp.office365.com
- port: 587
- secure: false (STARTTLS)

Zimbra defaults:
- host: derived from baseUrl when smtpHost is not set
- port: 587
- secure: false

Adapters:
- ZimbraAdapter.getSmtpProfile() builds a profile from IntegrationConfig.
- OutlookAdapter.getSmtpProfile() builds a profile from IntegrationConfig.

Reminder:
- SMTP credentials are required in runtime environment.
- Use msg.meta.smtpProfile to choose a specific provider (or "both" to dual flow).
